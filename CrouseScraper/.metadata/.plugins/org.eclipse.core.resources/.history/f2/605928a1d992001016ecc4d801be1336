package CollegeScraper;

import org.jsoup.Jsoup;
import org.jsoup.nodes.Document;
import org.jsoup.nodes.Element;
import org.jsoup.select.Elements;
import java.io.IOException;

public class test {
    public static void main(String[] args) throws IOException {
        String baseUrl = "https://bschool.careers360.com/colleges/ranking";
        boolean hasData = true;
        int pageNum=1;

        while(hasData) {
        	
        
        String url = baseUrl+"?page="+pageNum;
        
        Document doc = Jsoup.connect(url)
                .userAgent("Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/108.0.0.0 Safari/537.36")
                .timeout(10000)
                .get();
        
        Elements collegeTitles = doc.select("h3.college_name_heading");

        Elements collegeFees = doc.select("li.college-fees-text");
        
        Elements collegeOwnership = doc.select("#college-list > div > div > div.facet-tuple-inner-container > div.left_side_tupple > div.tupple_top_block > div.tupple_right_block.d-none.d-lg-block > div > span:nth-child(2) > p.college-rank-rating");
        
        if (collegeTitles.size() == 0) {
            hasData = false;
            System.out.println("No more data found. Ending pagination.");
            break;
        }
        if(pageNum==1)hasData=false;
        

        System.out.println("Found " + collegeTitles.size() + " colleges:");
        System.out.println("Found " + collegeFees.size() + " fees:");

        int minSize = Math.min(collegeTitles.size(), collegeFees.size());
        
        for(int i = 0; i < minSize; i++) {
            String collegeName = collegeTitles.get(i).text();
            String collegeFee = collegeFees.get(i).text();
            String ownerShip = collegeOwnership.get(i).text();
            
            System.out.println("College: " + collegeName + " || Fee: " + collegeFee + "\n" + "|| OwnerShip : "+ ownerShip);
        }
        
        pageNum++;
        try {
			Thread.sleep(1000);
		} catch (InterruptedException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
        
        
    }}
}
